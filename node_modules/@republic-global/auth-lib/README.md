# Description

Simple wrapper lib to use for request authentication.

## Configuration

* issuer: optional - accepted token issuer. defaults to `https://crowdcraftb2c.b2clogin.com/c76d11f4-fdad-48c4-a0cc-f2c4eba3be43/v2.0/`
* jwksUri: optional - url to jwks metadata. defaults to `https://crowdcraftb2c.b2clogin.com/crowdcraftb2c.onmicrosoft.com/b2c_1_signin_signup/discovery/v2.0/keys`

## Sample usage

See the full example in examples/app.js

`const authLib = require ('../index');`

`let auth = authLib({});`

then use `auth` as the request validation parameter in your express routes

```
app.get('/me', auth, (req,res)=>{
    res.send(req.user)
})
```

# Notes

req.user will have the following properties populated:

```
id: string
username: string
userType: string (member|customer|admin)
firstName: string
lastName: string
country: string
isServiceAccount: boolean
serviceAccountId?: string
```

# TODO

To get service account tokens, use the utility getServiceAccountToken method - see the example app for usage.
You will need the following option values:
- url - token endpoint url (same for all service accounts)
- clientId - client id
- clientSecret - client secret
- scope - token scope (same for all service accounts) for now

