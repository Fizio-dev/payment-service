import { LoggerFactory } from '../utils/index.js';
import { getRequestContext } from './request-context.js';
const logger = LoggerFactory.getLogger('FetchAuthMiddleware');
// TODO ensure this is safe
export const authHeaderInjector = (requestInit) => {
    const ctx = getRequestContext();
    if (ctx) {
        logger.debug(`TEMP: OpenAPI Middleware invoked for user ${ctx.user.username}`);
        return {
            ...requestInit,
            headers: [['Authorization', `Bearer ${ctx.authInfo.token}`]],
        };
    }
    return requestInit;
};
//# sourceMappingURL=auth-header-injector.js.map