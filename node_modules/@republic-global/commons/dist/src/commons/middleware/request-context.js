import { AsyncLocalStorage } from 'async_hooks';
const asyncLocalStorage = new AsyncLocalStorage();
export const getRequestContext = () => asyncLocalStorage.getStore();
export const jwtContext = (req, res, next) => {
    const authInfo = req.authInfo;
    const user = req.user;
    if (authInfo && user) {
        const requestContext = { user, authInfo };
        // Store the authToken in AsyncLocalStorage
        asyncLocalStorage.enterWith(requestContext);
    }
    next();
};
//# sourceMappingURL=request-context.js.map