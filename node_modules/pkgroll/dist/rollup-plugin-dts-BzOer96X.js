"use strict";var st=Object.defineProperty;var g=(r,e)=>st(r,"name",{value:e,configurable:!0});var ut=require("module"),ot=require("path"),ct=require("tty"),lt=require("os"),ft=require("magic-string"),me=typeof document<"u"?document.currentScript:null;function pt(r){var e=Object.create(null);return r&&Object.keys(r).forEach(function(t){if(t!=="default"){var n=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:function(){return r[t]}})}}),e.default=r,Object.freeze(e)}g(pt,"_interopNamespaceDefault");var T=pt(ot),W=require;const dt=g(()=>{const r=process.cwd();try{return W.resolve("typescript",{paths:[r]})}catch{throw new Error(`Could not find \`typescript\` in ${r}`)}},"getLocalTypescriptPath");var c=W(dt()),G={},P={},j={};Object.defineProperty(j,"__esModule",{value:!0}),j.default=/((['"])(?:(?!\2|\\).|\\(?:\r\n|[\s\S]))*(\2)?|`(?:[^`\\$]|\\[\s\S]|\$(?!\{)|\$\{(?:[^{}]|\{[^}]*\}?)*\}?)*(`)?)|(\/\/.*)|(\/\*(?:[^*]|\*(?!\/))*(\*\/)?)|(\/(?!\*)(?:\[(?:(?![\]\\]).|\\.)*\]|(?![\/\]\\]).|\\.)+\/(?:(?!\s*(?:\b|[\u0080-\uFFFF$\\'"~({]|[+\-!](?!=)|\.?\d))|[gmiyus]{1,6}\b(?![\u0080-\uFFFF$\\]|\s*(?:[+\-*%&|^<>!=?({]|\/(?![\/*])))))|(0[xX][\da-fA-F]+|0[oO][0-7]+|0[bB][01]+|(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?)|((?!\d)(?:(?!\s)[$\w\u0080-\uFFFF]|\\u[\da-fA-F]{4}|\\u\{[\da-fA-F]+\})+)|(--|\+\+|&&|\|\||=>|\.{3}|(?:[+\-\/%&|^]|\*{1,2}|<{1,2}|>{1,3}|!=?|={1,2})=?|[?~.,:;[\](){}])|(\s+)|(^$|[\s\S])/g,j.matchToToken=function(r){var e={type:"invalid",value:r[0],closed:void 0};return r[1]?(e.type="string",e.closed=!!(r[3]||r[4])):r[5]?e.type="comment":r[6]?(e.type="comment",e.closed=!!r[7]):r[8]?e.type="regex":r[9]?e.type="number":r[10]?e.type="name":r[11]?e.type="punctuator":r[12]&&(e.type="whitespace"),e};var he={},$={};Object.defineProperty($,"__esModule",{value:!0}),$.isIdentifierChar=ve,$.isIdentifierName=gt,$.isIdentifierStart=ye;let z="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",be="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u180F-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u200C\u200D\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\u30FB\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F\uFF65";const mt=new RegExp("["+z+"]"),ht=new RegExp("["+z+be+"]");z=be=null;const ge=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],bt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239];function V(r,e){let t=65536;for(let n=0,o=e.length;n<o;n+=2){if(t+=e[n],t>r)return!1;if(t+=e[n+1],t>=r)return!0}return!1}g(V,"isInAstralSet");function ye(r){return r<65?r===36:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&mt.test(String.fromCharCode(r)):V(r,ge)}g(ye,"isIdentifierStart");function ve(r){return r<48?r===36:r<58?!0:r<65?!1:r<=90?!0:r<97?r===95:r<=122?!0:r<=65535?r>=170&&ht.test(String.fromCharCode(r)):V(r,ge)||V(r,bt)}g(ve,"isIdentifierChar");function gt(r){let e=!0;for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if((n&64512)===55296&&t+1<r.length){const o=r.charCodeAt(++t);(o&64512)===56320&&(n=65536+((n&1023)<<10)+(o&1023))}if(e){if(e=!1,!ye(n))return!1}else if(!ve(n))return!1}return!e}g(gt,"isIdentifierName");var M={};Object.defineProperty(M,"__esModule",{value:!0}),M.isKeyword=St,M.isReservedWord=xe,M.isStrictBindOnlyReservedWord=Se,M.isStrictBindReservedWord=wt,M.isStrictReservedWord=we;const U={keyword:["break","case","catch","continue","debugger","default","do","else","finally","for","function","if","return","switch","throw","try","var","const","while","with","new","this","super","class","extends","export","import","null","true","false","in","instanceof","typeof","void","delete"],strict:["implements","interface","let","package","private","protected","public","static","yield"],strictBind:["eval","arguments"]},yt=new Set(U.keyword),vt=new Set(U.strict),xt=new Set(U.strictBind);function xe(r,e){return e&&r==="await"||r==="enum"}g(xe,"isReservedWord");function we(r,e){return xe(r,e)||vt.has(r)}g(we,"isStrictReservedWord");function Se(r){return xt.has(r)}g(Se,"isStrictBindOnlyReservedWord");function wt(r,e){return we(r,e)||Se(r)}g(wt,"isStrictBindReservedWord");function St(r){return yt.has(r)}g(St,"isKeyword"),function(r){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isIdentifierChar",{enumerable:!0,get:function(){return e.isIdentifierChar}}),Object.defineProperty(r,"isIdentifierName",{enumerable:!0,get:function(){return e.isIdentifierName}}),Object.defineProperty(r,"isIdentifierStart",{enumerable:!0,get:function(){return e.isIdentifierStart}}),Object.defineProperty(r,"isKeyword",{enumerable:!0,get:function(){return t.isKeyword}}),Object.defineProperty(r,"isReservedWord",{enumerable:!0,get:function(){return t.isReservedWord}}),Object.defineProperty(r,"isStrictBindOnlyReservedWord",{enumerable:!0,get:function(){return t.isStrictBindOnlyReservedWord}}),Object.defineProperty(r,"isStrictBindReservedWord",{enumerable:!0,get:function(){return t.isStrictBindReservedWord}}),Object.defineProperty(r,"isStrictReservedWord",{enumerable:!0,get:function(){return t.isStrictReservedWord}});var e=$,t=M}(he);function Ct(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}g(Ct,"commonjsRequire");var H={exports:{}};let Ce=process.argv||[],A=process.env,Et=!("NO_COLOR"in A||Ce.includes("--no-color"))&&("FORCE_COLOR"in A||Ce.includes("--color")||process.platform==="win32"||Ct!=null&&ct.isatty(1)&&A.TERM!=="dumb"||"CI"in A),Tt=g((r,e,t=r)=>n=>{let o=""+n,h=o.indexOf(e,r.length);return~h?r+Nt(o,e,t,h)+e:r+o+e},"formatter"),Nt=g((r,e,t,n)=>{let o="",h=0;do o+=r.substring(h,n)+t,h=n+e.length,n=r.indexOf(e,h);while(~n);return o+r.substring(h)},"replaceClose"),Ee=g((r=Et)=>{let e=r?Tt:()=>String;return{isColorSupported:r,reset:e("\x1B[0m","\x1B[0m"),bold:e("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:e("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:e("\x1B[3m","\x1B[23m"),underline:e("\x1B[4m","\x1B[24m"),inverse:e("\x1B[7m","\x1B[27m"),hidden:e("\x1B[8m","\x1B[28m"),strikethrough:e("\x1B[9m","\x1B[29m"),black:e("\x1B[30m","\x1B[39m"),red:e("\x1B[31m","\x1B[39m"),green:e("\x1B[32m","\x1B[39m"),yellow:e("\x1B[33m","\x1B[39m"),blue:e("\x1B[34m","\x1B[39m"),magenta:e("\x1B[35m","\x1B[39m"),cyan:e("\x1B[36m","\x1B[39m"),white:e("\x1B[37m","\x1B[39m"),gray:e("\x1B[90m","\x1B[39m"),bgBlack:e("\x1B[40m","\x1B[49m"),bgRed:e("\x1B[41m","\x1B[49m"),bgGreen:e("\x1B[42m","\x1B[49m"),bgYellow:e("\x1B[43m","\x1B[49m"),bgBlue:e("\x1B[44m","\x1B[49m"),bgMagenta:e("\x1B[45m","\x1B[49m"),bgCyan:e("\x1B[46m","\x1B[49m"),bgWhite:e("\x1B[47m","\x1B[49m")}},"createColors");H.exports=Ee(),H.exports.createColors=Ee;var Te=H.exports,X={exports:{}},Y,Ne;function Ot(){if(Ne)return Y;Ne=1;var r=/[|\\{}()[\]^$+*?.]/g;return Y=g(function(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(r,"\\$&")},"escapeStringRegexp"),Y}g(Ot,"requireEscapeStringRegexp");var L={exports:{}},J={exports:{}},Q,Oe;function kt(){return Oe||(Oe=1,Q={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}),Q}g(kt,"requireColorName");var ke;function De(){if(ke)return J.exports;ke=1;var r=kt(),e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);var n=J.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var o in n)if(n.hasOwnProperty(o)){if(!("channels"in n[o]))throw new Error("missing channels property: "+o);if(!("labels"in n[o]))throw new Error("missing channel labels property: "+o);if(n[o].labels.length!==n[o].channels)throw new Error("channel and label counts mismatch: "+o);var h=n[o].channels,p=n[o].labels;delete n[o].channels,delete n[o].labels,Object.defineProperty(n[o],"channels",{value:h}),Object.defineProperty(n[o],"labels",{value:p})}n.rgb.hsl=function(a){var i=a[0]/255,s=a[1]/255,u=a[2]/255,l=Math.min(i,s,u),m=Math.max(i,s,u),f=m-l,d,y,v;return m===l?d=0:i===m?d=(s-u)/f:s===m?d=2+(u-i)/f:u===m&&(d=4+(i-s)/f),d=Math.min(d*60,360),d<0&&(d+=360),v=(l+m)/2,m===l?y=0:v<=.5?y=f/(m+l):y=f/(2-m-l),[d,y*100,v*100]},n.rgb.hsv=function(a){var i,s,u,l,m,f=a[0]/255,d=a[1]/255,y=a[2]/255,v=Math.max(f,d,y),w=v-Math.min(f,d,y),x=g(function(S){return(v-S)/6/w+1/2},"diffc");return w===0?l=m=0:(m=w/v,i=x(f),s=x(d),u=x(y),f===v?l=u-s:d===v?l=1/3+i-u:y===v&&(l=2/3+s-i),l<0?l+=1:l>1&&(l-=1)),[l*360,m*100,v*100]},n.rgb.hwb=function(a){var i=a[0],s=a[1],u=a[2],l=n.rgb.hsl(a)[0],m=1/255*Math.min(i,Math.min(s,u));return u=1-1/255*Math.max(i,Math.max(s,u)),[l,m*100,u*100]},n.rgb.cmyk=function(a){var i=a[0]/255,s=a[1]/255,u=a[2]/255,l,m,f,d;return d=Math.min(1-i,1-s,1-u),l=(1-i-d)/(1-d)||0,m=(1-s-d)/(1-d)||0,f=(1-u-d)/(1-d)||0,[l*100,m*100,f*100,d*100]};function b(a,i){return Math.pow(a[0]-i[0],2)+Math.pow(a[1]-i[1],2)+Math.pow(a[2]-i[2],2)}return g(b,"comparativeDistance"),n.rgb.keyword=function(a){var i=e[a];if(i)return i;var s=1/0,u;for(var l in r)if(r.hasOwnProperty(l)){var m=r[l],f=b(a,m);f<s&&(s=f,u=l)}return u},n.keyword.rgb=function(a){return r[a]},n.rgb.xyz=function(a){var i=a[0]/255,s=a[1]/255,u=a[2]/255;i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92,u=u>.04045?Math.pow((u+.055)/1.055,2.4):u/12.92;var l=i*.4124+s*.3576+u*.1805,m=i*.2126+s*.7152+u*.0722,f=i*.0193+s*.1192+u*.9505;return[l*100,m*100,f*100]},n.rgb.lab=function(a){var i=n.rgb.xyz(a),s=i[0],u=i[1],l=i[2],m,f,d;return s/=95.047,u/=100,l/=108.883,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,l=l>.008856?Math.pow(l,1/3):7.787*l+16/116,m=116*u-16,f=500*(s-u),d=200*(u-l),[m,f,d]},n.hsl.rgb=function(a){var i=a[0]/360,s=a[1]/100,u=a[2]/100,l,m,f,d,y;if(s===0)return y=u*255,[y,y,y];u<.5?m=u*(1+s):m=u+s-u*s,l=2*u-m,d=[0,0,0];for(var v=0;v<3;v++)f=i+1/3*-(v-1),f<0&&f++,f>1&&f--,6*f<1?y=l+(m-l)*6*f:2*f<1?y=m:3*f<2?y=l+(m-l)*(2/3-f)*6:y=l,d[v]=y*255;return d},n.hsl.hsv=function(a){var i=a[0],s=a[1]/100,u=a[2]/100,l=s,m=Math.max(u,.01),f,d;return u*=2,s*=u<=1?u:2-u,l*=m<=1?m:2-m,d=(u+s)/2,f=u===0?2*l/(m+l):2*s/(u+s),[i,f*100,d*100]},n.hsv.rgb=function(a){var i=a[0]/60,s=a[1]/100,u=a[2]/100,l=Math.floor(i)%6,m=i-Math.floor(i),f=255*u*(1-s),d=255*u*(1-s*m),y=255*u*(1-s*(1-m));switch(u*=255,l){case 0:return[u,y,f];case 1:return[d,u,f];case 2:return[f,u,y];case 3:return[f,d,u];case 4:return[y,f,u];case 5:return[u,f,d]}},n.hsv.hsl=function(a){var i=a[0],s=a[1]/100,u=a[2]/100,l=Math.max(u,.01),m,f,d;return d=(2-s)*u,m=(2-s)*l,f=s*l,f/=m<=1?m:2-m,f=f||0,d/=2,[i,f*100,d*100]},n.hwb.rgb=function(a){var i=a[0]/360,s=a[1]/100,u=a[2]/100,l=s+u,m,f,d,y;l>1&&(s/=l,u/=l),m=Math.floor(6*i),f=1-u,d=6*i-m,m&1&&(d=1-d),y=s+d*(f-s);var v,w,x;switch(m){default:case 6:case 0:v=f,w=y,x=s;break;case 1:v=y,w=f,x=s;break;case 2:v=s,w=f,x=y;break;case 3:v=s,w=y,x=f;break;case 4:v=y,w=s,x=f;break;case 5:v=f,w=s,x=y;break}return[v*255,w*255,x*255]},n.cmyk.rgb=function(a){var i=a[0]/100,s=a[1]/100,u=a[2]/100,l=a[3]/100,m,f,d;return m=1-Math.min(1,i*(1-l)+l),f=1-Math.min(1,s*(1-l)+l),d=1-Math.min(1,u*(1-l)+l),[m*255,f*255,d*255]},n.xyz.rgb=function(a){var i=a[0]/100,s=a[1]/100,u=a[2]/100,l,m,f;return l=i*3.2406+s*-1.5372+u*-.4986,m=i*-.9689+s*1.8758+u*.0415,f=i*.0557+s*-.204+u*1.057,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:l*12.92,m=m>.0031308?1.055*Math.pow(m,1/2.4)-.055:m*12.92,f=f>.0031308?1.055*Math.pow(f,1/2.4)-.055:f*12.92,l=Math.min(Math.max(0,l),1),m=Math.min(Math.max(0,m),1),f=Math.min(Math.max(0,f),1),[l*255,m*255,f*255]},n.xyz.lab=function(a){var i=a[0],s=a[1],u=a[2],l,m,f;return i/=95.047,s/=100,u/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,u=u>.008856?Math.pow(u,1/3):7.787*u+16/116,l=116*s-16,m=500*(i-s),f=200*(s-u),[l,m,f]},n.lab.xyz=function(a){var i=a[0],s=a[1],u=a[2],l,m,f;m=(i+16)/116,l=s/500+m,f=m-u/200;var d=Math.pow(m,3),y=Math.pow(l,3),v=Math.pow(f,3);return m=d>.008856?d:(m-16/116)/7.787,l=y>.008856?y:(l-16/116)/7.787,f=v>.008856?v:(f-16/116)/7.787,l*=95.047,m*=100,f*=108.883,[l,m,f]},n.lab.lch=function(a){var i=a[0],s=a[1],u=a[2],l,m,f;return l=Math.atan2(u,s),m=l*360/2/Math.PI,m<0&&(m+=360),f=Math.sqrt(s*s+u*u),[i,f,m]},n.lch.lab=function(a){var i=a[0],s=a[1],u=a[2],l,m,f;return f=u/360*2*Math.PI,l=s*Math.cos(f),m=s*Math.sin(f),[i,l,m]},n.rgb.ansi16=function(a){var i=a[0],s=a[1],u=a[2],l=1 in arguments?arguments[1]:n.rgb.hsv(a)[2];if(l=Math.round(l/50),l===0)return 30;var m=30+(Math.round(u/255)<<2|Math.round(s/255)<<1|Math.round(i/255));return l===2&&(m+=60),m},n.hsv.ansi16=function(a){return n.rgb.ansi16(n.hsv.rgb(a),a[2])},n.rgb.ansi256=function(a){var i=a[0],s=a[1],u=a[2];if(i===s&&s===u)return i<8?16:i>248?231:Math.round((i-8)/247*24)+232;var l=16+36*Math.round(i/255*5)+6*Math.round(s/255*5)+Math.round(u/255*5);return l},n.ansi16.rgb=function(a){var i=a%10;if(i===0||i===7)return a>50&&(i+=3.5),i=i/10.5*255,[i,i,i];var s=(~~(a>50)+1)*.5,u=(i&1)*s*255,l=(i>>1&1)*s*255,m=(i>>2&1)*s*255;return[u,l,m]},n.ansi256.rgb=function(a){if(a>=232){var i=(a-232)*10+8;return[i,i,i]}a-=16;var s,u=Math.floor(a/36)/5*255,l=Math.floor((s=a%36)/6)/5*255,m=s%6/5*255;return[u,l,m]},n.rgb.hex=function(a){var i=((Math.round(a[0])&255)<<16)+((Math.round(a[1])&255)<<8)+(Math.round(a[2])&255),s=i.toString(16).toUpperCase();return"000000".substring(s.length)+s},n.hex.rgb=function(a){var i=a.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!i)return[0,0,0];var s=i[0];i[0].length===3&&(s=s.split("").map(function(d){return d+d}).join(""));var u=parseInt(s,16),l=u>>16&255,m=u>>8&255,f=u&255;return[l,m,f]},n.rgb.hcg=function(a){var i=a[0]/255,s=a[1]/255,u=a[2]/255,l=Math.max(Math.max(i,s),u),m=Math.min(Math.min(i,s),u),f=l-m,d,y;return f<1?d=m/(1-f):d=0,f<=0?y=0:l===i?y=(s-u)/f%6:l===s?y=2+(u-i)/f:y=4+(i-s)/f+4,y/=6,y%=1,[y*360,f*100,d*100]},n.hsl.hcg=function(a){var i=a[1]/100,s=a[2]/100,u=1,l=0;return s<.5?u=2*i*s:u=2*i*(1-s),u<1&&(l=(s-.5*u)/(1-u)),[a[0],u*100,l*100]},n.hsv.hcg=function(a){var i=a[1]/100,s=a[2]/100,u=i*s,l=0;return u<1&&(l=(s-u)/(1-u)),[a[0],u*100,l*100]},n.hcg.rgb=function(a){var i=a[0]/360,s=a[1]/100,u=a[2]/100;if(s===0)return[u*255,u*255,u*255];var l=[0,0,0],m=i%1*6,f=m%1,d=1-f,y=0;switch(Math.floor(m)){case 0:l[0]=1,l[1]=f,l[2]=0;break;case 1:l[0]=d,l[1]=1,l[2]=0;break;case 2:l[0]=0,l[1]=1,l[2]=f;break;case 3:l[0]=0,l[1]=d,l[2]=1;break;case 4:l[0]=f,l[1]=0,l[2]=1;break;default:l[0]=1,l[1]=0,l[2]=d}return y=(1-s)*u,[(s*l[0]+y)*255,(s*l[1]+y)*255,(s*l[2]+y)*255]},n.hcg.hsv=function(a){var i=a[1]/100,s=a[2]/100,u=i+s*(1-i),l=0;return u>0&&(l=i/u),[a[0],l*100,u*100]},n.hcg.hsl=function(a){var i=a[1]/100,s=a[2]/100,u=s*(1-i)+.5*i,l=0;return u>0&&u<.5?l=i/(2*u):u>=.5&&u<1&&(l=i/(2*(1-u))),[a[0],l*100,u*100]},n.hcg.hwb=function(a){var i=a[1]/100,s=a[2]/100,u=i+s*(1-i);return[a[0],(u-i)*100,(1-u)*100]},n.hwb.hcg=function(a){var i=a[1]/100,s=a[2]/100,u=1-s,l=u-i,m=0;return l<1&&(m=(u-l)/(1-l)),[a[0],l*100,m*100]},n.apple.rgb=function(a){return[a[0]/65535*255,a[1]/65535*255,a[2]/65535*255]},n.rgb.apple=function(a){return[a[0]/255*65535,a[1]/255*65535,a[2]/255*65535]},n.gray.rgb=function(a){return[a[0]/100*255,a[0]/100*255,a[0]/100*255]},n.gray.hsl=n.gray.hsv=function(a){return[0,0,a[0]]},n.gray.hwb=function(a){return[0,100,a[0]]},n.gray.cmyk=function(a){return[0,0,0,a[0]]},n.gray.lab=function(a){return[a[0],0,0]},n.gray.hex=function(a){var i=Math.round(a[0]/100*255)&255,s=(i<<16)+(i<<8)+i,u=s.toString(16).toUpperCase();return"000000".substring(u.length)+u},n.rgb.gray=function(a){var i=(a[0]+a[1]+a[2])/3;return[i/255*100]},J.exports}g(De,"requireConversions");var Z,Re;function Dt(){if(Re)return Z;Re=1;var r=De();function e(){for(var h={},p=Object.keys(r),b=p.length,a=0;a<b;a++)h[p[a]]={distance:-1,parent:null};return h}g(e,"buildGraph");function t(h){var p=e(),b=[h];for(p[h].distance=0;b.length;)for(var a=b.pop(),i=Object.keys(r[a]),s=i.length,u=0;u<s;u++){var l=i[u],m=p[l];m.distance===-1&&(m.distance=p[a].distance+1,m.parent=a,b.unshift(l))}return p}g(t,"deriveBFS");function n(h,p){return function(b){return p(h(b))}}g(n,"link");function o(h,p){for(var b=[p[h].parent,h],a=r[p[h].parent][h],i=p[h].parent;p[i].parent;)b.unshift(p[i].parent),a=n(r[p[i].parent][i],a),i=p[i].parent;return a.conversion=b,a}return g(o,"wrapConversion"),Z=g(function(h){for(var p=t(h),b={},a=Object.keys(p),i=a.length,s=0;s<i;s++){var u=a[s],l=p[u];l.parent!==null&&(b[u]=o(u,p))}return b},"route"),Z}g(Dt,"requireRoute");var ee,Me;function Rt(){if(Me)return ee;Me=1;var r=De(),e=Dt(),t={},n=Object.keys(r);function o(p){var b=g(function(a){return a==null?a:(arguments.length>1&&(a=Array.prototype.slice.call(arguments)),p(a))},"wrappedFn");return"conversion"in p&&(b.conversion=p.conversion),b}g(o,"wrapRaw");function h(p){var b=g(function(a){if(a==null)return a;arguments.length>1&&(a=Array.prototype.slice.call(arguments));var i=p(a);if(typeof i=="object")for(var s=i.length,u=0;u<s;u++)i[u]=Math.round(i[u]);return i},"wrappedFn");return"conversion"in p&&(b.conversion=p.conversion),b}return g(h,"wrapRounded"),n.forEach(function(p){t[p]={},Object.defineProperty(t[p],"channels",{value:r[p].channels}),Object.defineProperty(t[p],"labels",{value:r[p].labels});var b=e(p),a=Object.keys(b);a.forEach(function(i){var s=b[i];t[p][i]=h(s),t[p][i].raw=o(s)})}),ee=t,ee}g(Rt,"requireColorConvert"),L.exports;var Ie;function Mt(){return Ie||(Ie=1,function(r){const e=Rt(),t=g((p,b)=>function(){return`\x1B[${p.apply(e,arguments)+b}m`},"wrapAnsi16"),n=g((p,b)=>function(){const a=p.apply(e,arguments);return`\x1B[${38+b};5;${a}m`},"wrapAnsi256"),o=g((p,b)=>function(){const a=p.apply(e,arguments);return`\x1B[${38+b};2;${a[0]};${a[1]};${a[2]}m`},"wrapAnsi16m");function h(){const p=new Map,b={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};b.color.grey=b.color.gray;for(const s of Object.keys(b)){const u=b[s];for(const l of Object.keys(u)){const m=u[l];b[l]={open:`\x1B[${m[0]}m`,close:`\x1B[${m[1]}m`},u[l]=b[l],p.set(m[0],m[1])}Object.defineProperty(b,s,{value:u,enumerable:!1}),Object.defineProperty(b,"codes",{value:p,enumerable:!1})}const a=g(s=>s,"ansi2ansi"),i=g((s,u,l)=>[s,u,l],"rgb2rgb");b.color.close="\x1B[39m",b.bgColor.close="\x1B[49m",b.color.ansi={ansi:t(a,0)},b.color.ansi256={ansi256:n(a,0)},b.color.ansi16m={rgb:o(i,0)},b.bgColor.ansi={ansi:t(a,10)},b.bgColor.ansi256={ansi256:n(a,10)},b.bgColor.ansi16m={rgb:o(i,10)};for(let s of Object.keys(e)){if(typeof e[s]!="object")continue;const u=e[s];s==="ansi16"&&(s="ansi"),"ansi16"in u&&(b.color.ansi[s]=t(u.ansi16,0),b.bgColor.ansi[s]=t(u.ansi16,10)),"ansi256"in u&&(b.color.ansi256[s]=n(u.ansi256,0),b.bgColor.ansi256[s]=n(u.ansi256,10)),"rgb"in u&&(b.color.ansi16m[s]=o(u.rgb,0),b.bgColor.ansi16m[s]=o(u.rgb,10))}return b}g(h,"assembleStyles"),Object.defineProperty(r,"exports",{enumerable:!0,get:h})}(L)),L.exports}g(Mt,"requireAnsiStyles");var te,Fe;function It(){return Fe||(Fe=1,te=g((r,e)=>{e=e||process.argv;const t=r.startsWith("-")?"":r.length===1?"-":"--",n=e.indexOf(t+r),o=e.indexOf("--");return n!==-1&&(o===-1?!0:n<o)},"hasFlag")),te}g(It,"requireHasFlag");var re,Pe;function Ft(){if(Pe)return re;Pe=1;const r=lt,e=It(),t=process.env;let n;e("no-color")||e("no-colors")||e("color=false")?n=!1:(e("color")||e("colors")||e("color=true")||e("color=always"))&&(n=!0),"FORCE_COLOR"in t&&(n=t.FORCE_COLOR.length===0||parseInt(t.FORCE_COLOR,10)!==0);function o(b){return b===0?!1:{level:b,hasBasic:!0,has256:b>=2,has16m:b>=3}}g(o,"translateLevel");function h(b){if(n===!1)return 0;if(e("color=16m")||e("color=full")||e("color=truecolor"))return 3;if(e("color=256"))return 2;if(b&&!b.isTTY&&n!==!0)return 0;const a=n?1:0;if(process.platform==="win32"){const i=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in t)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(i=>i in t)||t.CI_NAME==="codeship"?1:a;if("TEAMCITY_VERSION"in t)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(t.TEAMCITY_VERSION)?1:0;if(t.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in t){const i=parseInt((t.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(t.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(t.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(t.TERM)||"COLORTERM"in t?1:(t.TERM==="dumb",a)}g(h,"supportsColor");function p(b){const a=h(b);return o(a)}return g(p,"getSupportLevel"),re={supportsColor:p,stdout:p(process.stdout),stderr:p(process.stderr)},re}g(Ft,"requireSupportsColor");var ne,$e;function Pt(){if($e)return ne;$e=1;const r=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,e=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,t=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,n=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function h(i){return i[0]==="u"&&i.length===5||i[0]==="x"&&i.length===3?String.fromCharCode(parseInt(i.slice(1),16)):o.get(i)||i}g(h,"unescape");function p(i,s){const u=[],l=s.trim().split(/\s*,\s*/g);let m;for(const f of l)if(!isNaN(f))u.push(Number(f));else if(m=f.match(t))u.push(m[2].replace(n,(d,y,v)=>y?h(y):v));else throw new Error(`Invalid Chalk template style argument: ${f} (in style '${i}')`);return u}g(p,"parseArguments");function b(i){e.lastIndex=0;const s=[];let u;for(;(u=e.exec(i))!==null;){const l=u[1];if(u[2]){const m=p(l,u[2]);s.push([l].concat(m))}else s.push([l])}return s}g(b,"parseStyle");function a(i,s){const u={};for(const m of s)for(const f of m.styles)u[f[0]]=m.inverse?null:f.slice(1);let l=i;for(const m of Object.keys(u))if(Array.isArray(u[m])){if(!(m in l))throw new Error(`Unknown Chalk style: ${m}`);u[m].length>0?l=l[m].apply(l,u[m]):l=l[m]}return l}return g(a,"buildStyle"),ne=g((i,s)=>{const u=[],l=[];let m=[];if(s.replace(r,(f,d,y,v,w,x)=>{if(d)m.push(h(d));else if(v){const S=m.join("");m=[],l.push(u.length===0?S:a(i,u)(S)),u.push({inverse:y,styles:b(v)})}else if(w){if(u.length===0)throw new Error("Found extraneous } in Chalk template literal");l.push(a(i,u)(m.join(""))),m=[],u.pop()}else m.push(x)}),l.push(m.join("")),u.length>0){const f=`Chalk template literal is missing ${u.length} closing bracket${u.length===1?"":"s"} (\`}\`)`;throw new Error(f)}return l.join("")},"templates"),ne}g(Pt,"requireTemplates");var _e;function $t(){return _e||(_e=1,function(r){const e=Ot(),t=Mt(),n=Ft().stdout,o=Pt(),h=process.platform==="win32"&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),p=["ansi","ansi","ansi256","ansi16m"],b=new Set(["gray"]),a=Object.create(null);function i(d,y){y=y||{};const v=n?n.level:0;d.level=y.level===void 0?v:y.level,d.enabled="enabled"in y?y.enabled:d.level>0}g(i,"applyOptions");function s(d){if(!this||!(this instanceof s)||this.template){const y={};return i(y,d),y.template=function(){const v=[].slice.call(arguments);return f.apply(null,[y.template].concat(v))},Object.setPrototypeOf(y,s.prototype),Object.setPrototypeOf(y.template,y),y.template.constructor=s,y.template}i(this,d)}g(s,"Chalk"),h&&(t.blue.open="\x1B[94m");for(const d of Object.keys(t))t[d].closeRe=new RegExp(e(t[d].close),"g"),a[d]={get(){const y=t[d];return l.call(this,this._styles?this._styles.concat(y):[y],this._empty,d)}};a.visible={get(){return l.call(this,this._styles||[],!0,"visible")}},t.color.closeRe=new RegExp(e(t.color.close),"g");for(const d of Object.keys(t.color.ansi))b.has(d)||(a[d]={get(){const y=this.level;return function(){const w={open:t.color[p[y]][d].apply(null,arguments),close:t.color.close,closeRe:t.color.closeRe};return l.call(this,this._styles?this._styles.concat(w):[w],this._empty,d)}}});t.bgColor.closeRe=new RegExp(e(t.bgColor.close),"g");for(const d of Object.keys(t.bgColor.ansi)){if(b.has(d))continue;const y="bg"+d[0].toUpperCase()+d.slice(1);a[y]={get(){const v=this.level;return function(){const x={open:t.bgColor[p[v]][d].apply(null,arguments),close:t.bgColor.close,closeRe:t.bgColor.closeRe};return l.call(this,this._styles?this._styles.concat(x):[x],this._empty,d)}}}}const u=Object.defineProperties(()=>{},a);function l(d,y,v){const w=g(function(){return m.apply(w,arguments)},"builder");w._styles=d,w._empty=y;const x=this;return Object.defineProperty(w,"level",{enumerable:!0,get(){return x.level},set(S){x.level=S}}),Object.defineProperty(w,"enabled",{enumerable:!0,get(){return x.enabled},set(S){x.enabled=S}}),w.hasGrey=this.hasGrey||v==="gray"||v==="grey",w.__proto__=u,w}g(l,"build");function m(){const d=arguments,y=d.length;let v=String(arguments[0]);if(y===0)return"";if(y>1)for(let x=1;x<y;x++)v+=" "+d[x];if(!this.enabled||this.level<=0||!v)return this._empty?"":v;const w=t.dim.open;h&&this.hasGrey&&(t.dim.open="");for(const x of this._styles.slice().reverse())v=x.open+v.replace(x.closeRe,x.open)+x.close,v=v.replace(/\r?\n/g,`${x.close}$&${x.open}`);return t.dim.open=w,v}g(m,"applyStyle");function f(d,y){if(!Array.isArray(y))return[].slice.call(arguments,1).join(" ");const v=[].slice.call(arguments,2),w=[y.raw[0]];for(let x=1;x<y.length;x++)w.push(String(v[x-1]).replace(/[{}\\]/g,"\\$&")),w.push(String(y.raw[x]));return o(d,w.join(""))}g(f,"chalkTag"),Object.defineProperties(s.prototype,a),r.exports=s(),r.exports.supportsColor=n,r.exports.default=r.exports}(X)),X.exports}g($t,"requireChalk"),Object.defineProperty(P,"__esModule",{value:!0}),P.default=Wt,P.shouldHighlight=We;var je=j,Ae=he,ae=_t(Te,!0);function Le(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Le=g(function(n){return n?t:e},"_getRequireWildcardCache$1"))(r)}g(Le,"_getRequireWildcardCache$1");function _t(r,e){if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=Le(e);if(t&&t.has(r))return t.get(r);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(h!=="default"&&{}.hasOwnProperty.call(r,h)){var p=o?Object.getOwnPropertyDescriptor(r,h):null;p&&(p.get||p.set)?Object.defineProperty(n,h,p):n[h]=r[h]}return n.default=r,t&&t.set(r,n),n}g(_t,"_interopRequireWildcard$1");const Be=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,ae.createColors)(!1):ae.default,Ke=g((r,e)=>t=>r(e(t)),"compose$1"),jt=new Set(["as","async","from","get","of","set"]);function At(r){return{keyword:r.cyan,capitalized:r.yellow,jsxIdentifier:r.yellow,punctuator:r.yellow,number:r.magenta,string:r.green,regex:r.magenta,comment:r.gray,invalid:Ke(Ke(r.white,r.bgRed),r.bold)}}g(At,"getDefs$1");const Lt=/\r\n|[\n\r\u2028\u2029]/,Bt=/^[()[\]{}]$/;let qe;{const r=/^[a-z][\w-]*$/i,e=g(function(t,n,o){if(t.type==="name"){if((0,Ae.isKeyword)(t.value)||(0,Ae.isStrictReservedWord)(t.value,!0)||jt.has(t.value))return"keyword";if(r.test(t.value)&&(o[n-1]==="<"||o.slice(n-2,n)==="</"))return"jsxIdentifier";if(t.value[0]!==t.value[0].toLowerCase())return"capitalized"}return t.type==="punctuator"&&Bt.test(t.value)?"bracket":t.type==="invalid"&&(t.value==="@"||t.value==="#")?"punctuator":t.type},"getTokenType");qe=g(function*(t){let n;for(;n=je.default.exec(t);){const o=je.matchToToken(n);yield{type:e(o,n.index,t),value:o.value}}},"tokenize")}function Kt(r,e){let t="";for(const{type:n,value:o}of qe(e)){const h=r[n];h?t+=o.split(Lt).map(p=>h(p)).join(`
`):t+=o}return t}g(Kt,"highlightTokens");function We(r){return Be.isColorSupported||r.forceColor}g(We,"shouldHighlight");let ie;function qt(r){if(r){var e;return(e=ie)!=null||(ie=(0,ae.createColors)(!0)),ie}return Be}g(qt,"getColors$1");function Wt(r,e={}){if(r!==""&&We(e)){const t=At(qt(e.forceColor));return Kt(t,r)}else return r}g(Wt,"highlight");{let r,e;P.getChalk=({forceColor:t})=>{var n;if((n=r)!=null||(r=$t()),t){var o;return(o=e)!=null||(e=new r.constructor({enabled:!0,level:1})),e}return r}}Object.defineProperty(G,"__esModule",{value:!0}),G.codeFrameColumns=Xe,G.default=Xt;var Ge=P,se=Gt(Te,!0);function ze(r){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(ze=g(function(n){return n?t:e},"_getRequireWildcardCache"))(r)}g(ze,"_getRequireWildcardCache");function Gt(r,e){if(r===null||typeof r!="object"&&typeof r!="function")return{default:r};var t=ze(e);if(t&&t.has(r))return t.get(r);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var h in r)if(h!=="default"&&Object.prototype.hasOwnProperty.call(r,h)){var p=o?Object.getOwnPropertyDescriptor(r,h):null;p&&(p.get||p.set)?Object.defineProperty(n,h,p):n[h]=r[h]}return n.default=r,t&&t.set(r,n),n}g(Gt,"_interopRequireWildcard");const zt=typeof process=="object"&&(process.env.FORCE_COLOR==="0"||process.env.FORCE_COLOR==="false")?(0,se.createColors)(!1):se.default,Ve=g((r,e)=>t=>r(e(t)),"compose");let ue;function Vt(r){if(r){var e;return(e=ue)!=null||(ue=(0,se.createColors)(!0)),ue}return zt}g(Vt,"getColors");let Ue=!1;function Ut(r){return{gutter:r.gray,marker:Ve(r.red,r.bold),message:Ve(r.red,r.bold)}}g(Ut,"getDefs");const He=/\r\n|[\n\r\u2028\u2029]/;function Ht(r,e,t){const n=Object.assign({column:0,line:-1},r.start),o=Object.assign({},n,r.end),{linesAbove:h=2,linesBelow:p=3}=t||{},b=n.line,a=n.column,i=o.line,s=o.column;let u=Math.max(b-(h+1),0),l=Math.min(e.length,i+p);b===-1&&(u=0),i===-1&&(l=e.length);const m=i-b,f={};if(m)for(let d=0;d<=m;d++){const y=d+b;if(!a)f[y]=!0;else if(d===0){const v=e[y-1].length;f[y]=[a,v-a+1]}else if(d===m)f[y]=[0,s];else{const v=e[y-d].length;f[y]=[0,v]}}else a===s?a?f[b]=[a,0]:f[b]=!0:f[b]=[a,s-a];return{start:u,end:l,markerLines:f}}g(Ht,"getMarkerLines");function Xe(r,e,t={}){const n=(t.highlightCode||t.forceColor)&&(0,Ge.shouldHighlight)(t),o=Vt(t.forceColor),h=Ut(o),p=g((d,y)=>n?d(y):y,"maybeHighlight"),b=r.split(He),{start:a,end:i,markerLines:s}=Ht(e,b,t),u=e.start&&typeof e.start.column=="number",l=String(i).length;let f=(n?(0,Ge.default)(r,t):r).split(He,i).slice(a,i).map((d,y)=>{const v=a+1+y,x=` ${` ${v}`.slice(-l)} |`,S=s[v],D=!s[v+1];if(S){let E="";if(Array.isArray(S)){const k=d.slice(0,Math.max(S[0]-1,0)).replace(/[^\t]/g," "),R=S[1]||1;E=[`
 `,p(h.gutter,x.replace(/\d/g," "))," ",k,p(h.marker,"^").repeat(R)].join(""),D&&t.message&&(E+=" "+p(h.message,t.message))}return[p(h.marker,">"),p(h.gutter,x),d.length>0?` ${d}`:"",E].join("")}else return` ${p(h.gutter,x)}${d.length>0?` ${d}`:""}`}).join(`
`);return t.message&&!u&&(f=`${" ".repeat(l+1)}${t.message}
${f}`),n?o.reset(f):f}g(Xe,"codeFrameColumns");function Xt(r,e,t,n={}){if(!Ue){Ue=!0;const h="Passing lineNumber and colNumber is deprecated to @babel/code-frame. Please use `codeFrameColumns`.";if(process.emitWarning)process.emitWarning(h,"DeprecationWarning");else{const p=new Error(h);p.name="DeprecationWarning",console.warn(new Error(h))}}return t=Math.max(t,0),Xe(r,{start:{column:t,line:e}},n)}g(Xt,"_default");function Yt(r){return{...r,compilerOptions:r.compilerOptions??{},respectExternal:r.respectExternal??!1}}g(Yt,"resolveDefaultOptions");const B=/\.d\.(c|m)?tsx?$/,Ye=".d.ts",oe={getCurrentDirectory:()=>c.sys.getCurrentDirectory(),getNewLine:()=>c.sys.newLine,getCanonicalFileName:c.sys.useCaseSensitiveFileNames?r=>r:r=>r.toLowerCase()},Jt={declaration:!0,noEmit:!1,emitDeclarationOnly:!0,noEmitOnError:!0,checkJs:!1,declarationMap:!1,skipLibCheck:!0,preserveSymlinks:!0,target:c.ScriptTarget.ESNext},_=new Map,F=g((...r)=>process.env.DTS_LOG_CACHE?console.log("[cache]",...r):null,"logCache");function Je([r,e],t){for(F(r),_.set(r,t);r!==e&&r!==T.dirname(r);){if(r=T.dirname(r),F("up",r),_.has(r))return F("has",r);_.set(r,t)}}g(Je,"cacheConfig");function ce(r,e,t){const n={...Jt,...e};let o=T.dirname(r),h=[];const p=t||o;if(_.has(p))F("HIT",p);else{F("miss",p);const s=t?T.resolve(process.cwd(),t):c.findConfigFile(o,c.sys.fileExists);if(!s)return{dtsFiles:h,dirName:o,compilerOptions:n};let u=o;o=T.dirname(s);const{config:l,error:m}=c.readConfigFile(s,c.sys.readFile);if(m)return console.error(c.formatDiagnostic(m,oe)),{dtsFiles:h,dirName:o,compilerOptions:n};F("tsconfig",l);const f=c.parseJsonConfigFileContent(l,c.sys,o);Je(t?[t,t]:[u,o],f)}const{fileNames:b,options:a,errors:i}=_.get(p);return h=b.filter(s=>B.test(s)),i.length?(console.error(c.formatDiagnostics(i,oe)),{dtsFiles:h,dirName:o,compilerOptions:n}):{dtsFiles:h,dirName:o,compilerOptions:{...a,...n}}}g(ce,"getCompilerOptions");function Qt(r,e,t){const{dtsFiles:n,compilerOptions:o}=ce(r,e,t);return c.createProgram([r].concat(Array.from(n)),o,c.createCompilerHost(o,!0))}g(Qt,"createProgram$1");function Zt(r,e,t){const n=[];let o=[],h=new Set,p="",b={};for(let a of r){if(B.test(a))continue;a=T.resolve(a);const i=ce(a,e,t);if(i.dtsFiles.forEach(h.add,h),!o.length){o.push(a),{dirName:p,compilerOptions:b}=i;continue}if(i.dirName===p)o.push(a);else{const s=c.createCompilerHost(b,!0),u=c.createProgram(o.concat(Array.from(h)),b,s);n.push(u),o=[a],{dirName:p,compilerOptions:b}=i}}if(o.length){const a=c.createCompilerHost(b,!0),i=c.createProgram(o.concat(Array.from(h)),b,a);n.push(i)}return n}g(Zt,"createPrograms");function er(){let r;try{return{codeFrameColumns:r}=W("@babel/code-frame"),r}catch{try{return{codeFrameColumns:r}=ut.createRequire(typeof document>"u"?require("url").pathToFileURL(__filename).href:me&&me.src||new URL("rollup-plugin-dts-BzOer96X.js",document.baseURI).href)("@babel/code-frame"),r}catch{}}}g(er,"getCodeFrame");function tr(r){const e=r.getSourceFile(),t=e.getLineAndCharacterOfPosition(r.getStart()),n=e.getLineAndCharacterOfPosition(r.getEnd());return{start:{line:t.line+1,column:t.character+1},end:{line:n.line+1,column:n.character+1}}}g(tr,"getLocation");function rr(r){const e=er(),n=r.getSourceFile().getFullText(),o=tr(r);return e?`
`+e(n,o,{highlightCode:!0}):`
${o.start.line}:${o.start.column}: \`${r.getFullText().trim()}\``}g(rr,"frameNode");class C extends Error{static{g(this,"UnsupportedSyntaxError")}constructor(e,t="Syntax not yet supported"){super(`${t}
${rr(e)}`)}}class nr{static{g(this,"NamespaceFixer")}constructor(e){this.sourceFile=e}findNamespaces(){const e=[],t={};for(const n of this.sourceFile.statements){const o={start:n.getStart(),end:n.getEnd()};if(c.isEmptyStatement(n)){e.unshift({name:"",exports:[],location:o});continue}if((c.isImportDeclaration(n)||c.isExportDeclaration(n))&&n.moduleSpecifier&&c.isStringLiteral(n.moduleSpecifier)){let{text:s}=n.moduleSpecifier;if(s.startsWith(".")&&(s.endsWith(".d.ts")||s.endsWith(".d.cts")||s.endsWith(".d.mts"))){let u=n.moduleSpecifier.getStart()+1,l=n.moduleSpecifier.getEnd()-1;e.unshift({name:"",exports:[],location:{start:u,end:l},textBeforeCodeAfter:s.replace(/\.d\.ts$/,".js").replace(/\.d\.cts$/,".cjs").replace(/\.d\.mts$/,".mjs")})}}if(c.isModuleDeclaration(n)&&n.body&&c.isModuleBlock(n.body)){for(const s of n.body.statements)if(c.isExportDeclaration(s)&&s.exportClause){if(c.isNamespaceExport(s.exportClause))continue;for(const u of s.exportClause.elements)u.propertyName&&u.propertyName.getText()==u.name.getText()&&e.unshift({name:"",exports:[],location:{start:u.propertyName.getEnd(),end:u.name.getEnd()}})}}if(c.isClassDeclaration(n)?t[n.name.getText()]={type:"class",generics:n.typeParameters}:c.isFunctionDeclaration(n)?t[n.name.getText()]={type:"function"}:c.isInterfaceDeclaration(n)?t[n.name.getText()]={type:"interface",generics:n.typeParameters}:c.isTypeAliasDeclaration(n)?t[n.name.getText()]={type:"type",generics:n.typeParameters}:c.isModuleDeclaration(n)&&c.isIdentifier(n.name)?t[n.name.getText()]={type:"namespace"}:c.isEnumDeclaration(n)&&(t[n.name.getText()]={type:"enum"}),!c.isVariableStatement(n))continue;const{declarations:h}=n.declarationList;if(h.length!==1)continue;const p=h[0],b=p.name.getText();if(!p.initializer||!c.isCallExpression(p.initializer)){t[b]={type:"var"};continue}const a=p.initializer.arguments[0];if(!p.initializer.expression.getFullText().includes("/*#__PURE__*/Object.freeze")||!c.isObjectLiteralExpression(a))continue;const i=[];for(const s of a.properties){if(!c.isPropertyAssignment(s)||!(c.isIdentifier(s.name)||c.isStringLiteral(s.name))||s.name.text!=="__proto__"&&!c.isIdentifier(s.initializer))throw new C(s,"Expected a property assignment");s.name.text!=="__proto__"&&i.push({exportedName:s.name.text,localName:s.initializer.getText()})}e.unshift({name:b,exports:i,location:o})}return{namespaces:e,itemTypes:t}}fix(){let e=this.sourceFile.getFullText();const{namespaces:t,itemTypes:n}=this.findNamespaces();for(const o of t){const h=e.slice(o.location.end);e=e.slice(0,o.location.start);for(const{exportedName:p,localName:b}of o.exports)if(p===b){const{type:a,generics:i}=n[b]||{};if(a==="interface"||a==="type"){const s=Qe(i);e+=`type ${o.name}_${p}${s.in} = ${b}${s.out};
`}else if(a==="enum"||a==="class"){const s=Qe(i);e+=`type ${o.name}_${p}${s.in} = ${b}${s.out};
`,e+=`declare const ${o.name}_${p}: typeof ${b};
`}else e+=`declare const ${o.name}_${p}: typeof ${b};
`}if(o.name){e+=`declare namespace ${o.name} {
`,e+=`  export {
`;for(const{exportedName:p,localName:b}of o.exports)p===b?e+=`    ${o.name}_${p} as ${p},
`:e+=`    ${b} as ${p},
`;e+=`  };
`,e+="}"}e+=o.textBeforeCodeAfter??"",e+=h}return e}}function Qe(r){return!r||!r.length?{in:"",out:""}:{in:`<${r.map(e=>e.getText()).join(", ")}>`,out:`<${r.map(e=>e.name.getText()).join(", ")}>`}}g(Qe,"renderTypeParams");let Ze=1;function ar(r){return N({type:"Program",sourceType:"module",body:[]},{start:r.getFullStart(),end:r.getEnd()})}g(ar,"createProgram");function ir(r){const e={type:"Identifier",name:String(Ze++)};return{ident:e,expr:{type:"AssignmentPattern",left:e,right:r}}}g(ir,"createReference");function O(r){return N({type:"Identifier",name:r.getText()},r)}g(O,"createIdentifier");function sr(r){const e=N({type:"FunctionExpression",id:null,params:[],body:{type:"BlockStatement",body:[]}},r),t=N({type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:String(Ze++)},arguments:[e],optional:!1}},r);return{fn:e,iife:t}}g(sr,"createIIFE");function ur(){const r={type:"ArrayExpression",elements:[]};return{expr:r,stmt:{type:"ReturnStatement",argument:r}}}g(ur,"createReturn");function or(r,e){return N({type:"FunctionDeclaration",id:N({type:"Identifier",name:c.idText(r)},r),params:[],body:{type:"BlockStatement",body:[]}},e)}g(or,"createDeclaration");function I(r){if(c.isLiteralExpression(r))return{type:"Literal",value:r.text};if(c.isPropertyAccessExpression(r)){if(c.isPrivateIdentifier(r.name))throw new C(r.name);return N({type:"MemberExpression",computed:!1,optional:!1,object:I(r.expression),property:I(r.name)},{start:r.expression.getStart(),end:r.name.getEnd()})}if(c.isIdentifier(r))return O(r);if(r.kind==c.SyntaxKind.NullKeyword)return{type:"Literal",value:null};throw new C(r)}g(I,"convertExpression");function N(r,e){let t="start"in e?e:{start:e.getStart(),end:e.getEnd()};return Object.assign(r,t)}g(N,"withStartEnd");function K(r,e){return(c.getCombinedModifierFlags(r)&e)===e}g(K,"matchesModifier");function cr({sourceFile:r}){const e=new ft(r.getFullText()),t=new Set,n=new Set;let o="";const h=new Map,p=new Map;for(const f of r.statements){if(c.isEmptyStatement(f)){e.remove(f.getStart(),f.getEnd());continue}if(c.isEnumDeclaration(f)||c.isFunctionDeclaration(f)||c.isInterfaceDeclaration(f)||c.isClassDeclaration(f)||c.isTypeAliasDeclaration(f)||c.isModuleDeclaration(f)){if(f.name){const d=f.name.getText();t.add(d),K(f,c.ModifierFlags.ExportDefault)?o=d:K(f,c.ModifierFlags.Export)&&n.add(d),f.flags&c.NodeFlags.GlobalAugmentation||m(d,[le(f),tt(f)])}c.isModuleDeclaration(f)&&lr(e,f),et(e,f)}else if(c.isVariableStatement(f)){const{declarations:d}=f.declarationList,y=K(f,c.ModifierFlags.Export);for(const E of f.declarationList.declarations)if(c.isIdentifier(E.name)){const k=E.name.getText();t.add(k),y&&n.add(k)}if(et(e,f),d.length==1){const E=d[0];c.isIdentifier(E.name)&&m(E.name.getText(),[le(f),tt(f)])}else{const E=d.slice(),k=E.shift();m(k.name.getText(),[le(f),k.getEnd()]);for(const R of E)c.isIdentifier(R.name)&&m(R.name.getText(),[R.getFullStart(),R.getEnd()])}const{flags:v}=f.declarationList,x=`declare ${v&c.NodeFlags.Let?"let":v&c.NodeFlags.Const?"const":"var"} `,S=f.declarationList.getChildren().find(E=>E.kind===c.SyntaxKind.SyntaxList).getChildren();let D=0;for(const E of S)if(E.kind===c.SyntaxKind.CommaToken)D=E.getStart(),e.remove(D,E.getEnd());else if(D){e.appendLeft(D,`;
`);const k=E.getFullStart(),R=e.slice(k,E.getStart());let de=R.length-R.trimStart().length;de?e.overwrite(k,k+de,x):e.appendLeft(k,x)}}}for(const f of r.statements)if(s(f),!!K(f,c.ModifierFlags.ExportDefault)&&(c.isFunctionDeclaration(f)||c.isClassDeclaration(f))){if(f.name)continue;o||(o=l("export_default"));const d=f.getChildren(),y=d.findIndex(S=>S.kind===c.SyntaxKind.ClassKeyword||S.kind===c.SyntaxKind.FunctionKeyword),v=d[y],w=d[y+1];if(w.kind>=c.SyntaxKind.FirstPunctuation&&w.kind<=c.SyntaxKind.LastPunctuation){const S=e.slice(v.getEnd(),w.getStart())!=" ";e.appendLeft(w.getStart(),`${S?" ":""}${o}`)}else e.appendRight(v.getEnd(),` ${o}`)}for(const f of p.values()){const y=f.pop()[0];for(const v of f)e.move(v[0],v[1],y)}o&&e.append(`
export default ${o};
`),n.size&&e.append(`
export { ${[...n].join(", ")} };
`);for(const[f,d]of h.entries())e.prepend(`import * as ${d} from "${f}";
`);const b=r.getLineStarts(),a=new Set;for(const f of r.typeReferenceDirectives){a.add(f.fileName);const{line:d}=r.getLineAndCharacterOfPosition(f.pos),y=b[d];let v=r.getLineEndOfPosition(f.pos);e.slice(v,v+1)==`
`&&(v+=1),e.remove(y,v)}const i=new Set;for(const f of r.referencedFiles){i.add(f.fileName);const{line:d}=r.getLineAndCharacterOfPosition(f.pos),y=b[d];let v=r.getLineEndOfPosition(f.pos);e.slice(v,v+1)==`
`&&(v+=1),e.remove(y,v)}return{code:e,typeReferences:a,fileReferences:i};function s(f){if(c.forEachChild(f,s),c.isImportTypeNode(f)){if(!c.isLiteralTypeNode(f.argument)||!c.isStringLiteral(f.argument.literal))throw new C(f,"inline imports should have a literal argument");const d=f.argument.literal.text,y=f.getChildren(),v=y.find(D=>D.kind===c.SyntaxKind.ImportKeyword).getStart();let w=f.getEnd();const x=y.find(D=>D.kind===c.SyntaxKind.DotToken||D.kind===c.SyntaxKind.LessThanToken);x&&(w=x.getStart());const S=u(d);e.overwrite(v,w,S)}}function u(f){let d=h.get(f);return d||(d=l(f.replace(/[^a-zA-Z0-9_$]/g,()=>"_")),h.set(f,d)),d}function l(f){let d=f;for(;t.has(d);)d=`_${d}`;return t.add(d),d}function m(f,d){let y=p.get(f);if(!y)y=[d],p.set(f,y);else{const v=y[y.length-1];v[1]===d[0]?v[1]=d[1]:y.push(d)}}}g(cr,"preProcess");function et(r,e){if(!c.canHaveModifiers(e))return;let t=!1;const n=c.isEnumDeclaration(e)||c.isClassDeclaration(e)||c.isFunctionDeclaration(e)||c.isModuleDeclaration(e)||c.isVariableStatement(e);for(const o of e.modifiers??[])switch(o.kind){case c.SyntaxKind.ExportKeyword:case c.SyntaxKind.DefaultKeyword:r.remove(o.getStart(),o.getEnd()+1);break;case c.SyntaxKind.DeclareKeyword:t=!0}n&&!t&&r.appendRight(e.getStart(),"declare ")}g(et,"fixModifiers");function lr(r,e){if(!(!e.body||!c.isModuleBlock(e.body))){for(const t of e.body.statements)if(c.isExportDeclaration(t)&&t.exportClause){if(c.isNamespaceExport(t.exportClause))continue;for(const n of t.exportClause.elements)n.propertyName||r.appendLeft(n.name.getEnd(),` as ${n.name.getText()}`)}}}g(lr,"duplicateExports");function le(r){const e=r.getFullStart();return e+(rt(r,e)?1:0)}g(le,"getStart");function tt(r){const e=r.getEnd();return e+(rt(r,e)?1:0)}g(tt,"getEnd");function rt(r,e){return r.getSourceFile().getFullText()[e]==`
`}g(rt,"newlineAt");const fr=new Set([c.SyntaxKind.LiteralType,c.SyntaxKind.VoidKeyword,c.SyntaxKind.UnknownKeyword,c.SyntaxKind.AnyKeyword,c.SyntaxKind.BooleanKeyword,c.SyntaxKind.NumberKeyword,c.SyntaxKind.StringKeyword,c.SyntaxKind.ObjectKeyword,c.SyntaxKind.NullKeyword,c.SyntaxKind.UndefinedKeyword,c.SyntaxKind.SymbolKeyword,c.SyntaxKind.NeverKeyword,c.SyntaxKind.ThisKeyword,c.SyntaxKind.ThisType,c.SyntaxKind.BigIntKeyword]);class nt{static{g(this,"DeclarationScope")}constructor({id:e,range:t}){if(this.scopes=[],e)this.declaration=or(e,t);else{const{iife:o,fn:h}=sr(t);this.iife=o,this.declaration=h}const n=ur();this.declaration.body.body.push(n.stmt),this.returnExpr=n.expr}pushScope(){this.scopes.push(new Set)}popScope(e=1){for(let t=0;t<e;t++)this.scopes.pop()}pushTypeVariable(e){const t=e.getText();this.scopes[this.scopes.length-1]?.add(t)}pushReference(e){let t;if(e.type==="Identifier"?t=e.name:e.type==="MemberExpression"&&e.object.type==="Identifier"&&(t=e.object.name),t){for(const h of this.scopes)if(h.has(t))return}if(t==="this")return;const{ident:n,expr:o}=ir(e);this.declaration.params.push(o),this.returnExpr.elements.push(n)}pushIdentifierReference(e){this.pushReference(O(e))}convertEntityName(e){return c.isIdentifier(e)?O(e):N({type:"MemberExpression",computed:!1,optional:!1,object:this.convertEntityName(e.left),property:O(e.right)},e)}convertPropertyAccess(e){if(!c.isIdentifier(e.expression)&&!c.isPropertyAccessExpression(e.expression))throw new C(e.expression);if(c.isPrivateIdentifier(e.name))throw new C(e.name);let t=c.isIdentifier(e.expression)?O(e.expression):this.convertPropertyAccess(e.expression);return N({type:"MemberExpression",computed:!1,optional:!1,object:t,property:O(e.name)},e)}convertComputedPropertyName(e){if(!e.name||!c.isComputedPropertyName(e.name))return;const{expression:t}=e.name;if(!(c.isLiteralExpression(t)||c.isPrefixUnaryExpression(t))){if(c.isIdentifier(t))return this.pushReference(O(t));if(c.isPropertyAccessExpression(t))return this.pushReference(this.convertPropertyAccess(t));throw new C(t)}}convertParametersAndType(e){this.convertComputedPropertyName(e);const t=this.convertTypeParameters(e.typeParameters);for(const n of e.parameters)this.convertTypeNode(n.type);this.convertTypeNode(e.type),this.popScope(t)}convertHeritageClauses(e){for(const t of e.heritageClauses||[])for(const n of t.types)this.pushReference(I(n.expression)),this.convertTypeArguments(n)}convertTypeArguments(e){if(e.typeArguments)for(const t of e.typeArguments)this.convertTypeNode(t)}convertMembers(e){for(const t of e){if(c.isPropertyDeclaration(t)||c.isPropertySignature(t)||c.isIndexSignatureDeclaration(t)){c.isPropertyDeclaration(t)&&t.initializer&&c.isPropertyAccessExpression(t.initializer)&&this.pushReference(this.convertPropertyAccess(t.initializer)),this.convertComputedPropertyName(t),this.convertTypeNode(t.type);continue}if(c.isMethodDeclaration(t)||c.isMethodSignature(t)||c.isConstructorDeclaration(t)||c.isConstructSignatureDeclaration(t)||c.isCallSignatureDeclaration(t)||c.isGetAccessorDeclaration(t)||c.isSetAccessorDeclaration(t))this.convertParametersAndType(t);else throw new C(t)}}convertTypeParameters(e){if(!e)return 0;for(const t of e)this.convertTypeNode(t.constraint),this.convertTypeNode(t.default),this.pushScope(),this.pushTypeVariable(t.name);return e.length}convertTypeNode(e){if(e&&!fr.has(e.kind)){if(c.isTypeReferenceNode(e)){this.pushReference(this.convertEntityName(e.typeName)),this.convertTypeArguments(e);return}if(c.isTypeLiteralNode(e))return this.convertMembers(e.members);if(c.isArrayTypeNode(e))return this.convertTypeNode(e.elementType);if(c.isTupleTypeNode(e)){for(const t of e.elements)this.convertTypeNode(t);return}if(c.isNamedTupleMember(e)||c.isParenthesizedTypeNode(e)||c.isTypeOperatorNode(e)||c.isTypePredicateNode(e))return this.convertTypeNode(e.type);if(c.isUnionTypeNode(e)||c.isIntersectionTypeNode(e)){for(const t of e.types)this.convertTypeNode(t);return}if(c.isMappedTypeNode(e)){const{typeParameter:t,type:n,nameType:o}=e;this.convertTypeNode(t.constraint),this.pushScope(),this.pushTypeVariable(t.name),this.convertTypeNode(n),o&&this.convertTypeNode(o),this.popScope();return}if(c.isConditionalTypeNode(e)){this.convertTypeNode(e.checkType),this.pushScope(),this.convertTypeNode(e.extendsType),this.convertTypeNode(e.trueType),this.convertTypeNode(e.falseType),this.popScope();return}if(c.isIndexedAccessTypeNode(e)){this.convertTypeNode(e.objectType),this.convertTypeNode(e.indexType);return}if(c.isFunctionOrConstructorTypeNode(e)){this.convertParametersAndType(e);return}if(c.isTypeQueryNode(e)){this.pushReference(this.convertEntityName(e.exprName));return}if(c.isRestTypeNode(e)){this.convertTypeNode(e.type);return}if(c.isOptionalTypeNode(e)){this.convertTypeNode(e.type);return}if(c.isTemplateLiteralTypeNode(e)){for(const t of e.templateSpans)this.convertTypeNode(t.type);return}if(c.isInferTypeNode(e)){const{typeParameter:t}=e;this.convertTypeNode(t.constraint),this.pushTypeVariable(t.name);return}else throw new C(e)}}convertNamespace(e,t=!1){if(this.pushScope(),t&&e.body&&c.isModuleDeclaration(e.body)){this.convertNamespace(e.body,!0);return}if(!e.body||!c.isModuleBlock(e.body))throw new C(e,'namespace must have a "ModuleBlock" body.');const{statements:n}=e.body;for(const o of n){if(c.isEnumDeclaration(o)||c.isFunctionDeclaration(o)||c.isClassDeclaration(o)||c.isInterfaceDeclaration(o)||c.isTypeAliasDeclaration(o)||c.isModuleDeclaration(o)){if(o.name&&c.isIdentifier(o.name))this.pushTypeVariable(o.name);else throw new C(o,"non-Identifier name not supported");continue}if(c.isVariableStatement(o)){for(const h of o.declarationList.declarations)if(c.isIdentifier(h.name))this.pushTypeVariable(h.name);else throw new C(h,"non-Identifier name not supported");continue}if(!c.isExportDeclaration(o))throw new C(o,"namespace child (hoisting) not supported yet")}for(const o of n){if(c.isVariableStatement(o)){for(const h of o.declarationList.declarations)h.type&&this.convertTypeNode(h.type);continue}if(c.isFunctionDeclaration(o)){this.convertParametersAndType(o);continue}if(c.isInterfaceDeclaration(o)||c.isClassDeclaration(o)){const h=this.convertTypeParameters(o.typeParameters);this.convertHeritageClauses(o),this.convertMembers(o.members),this.popScope(h);continue}if(c.isTypeAliasDeclaration(o)){const h=this.convertTypeParameters(o.typeParameters);this.convertTypeNode(o.type),this.popScope(h);continue}if(c.isModuleDeclaration(o)){this.convertNamespace(o,t);continue}if(!c.isEnumDeclaration(o))if(c.isExportDeclaration(o)){if(o.exportClause){if(c.isNamespaceExport(o.exportClause))throw new C(o.exportClause);for(const h of o.exportClause.elements){const p=h.propertyName||h.name;this.pushIdentifierReference(p)}}}else throw new C(o,"namespace child (walking) not supported yet")}this.popScope()}}function pr({sourceFile:r}){return new dr(r).transform()}g(pr,"convert");class dr{static{g(this,"Transformer")}constructor(e){this.sourceFile=e,this.declarations=new Map,this.ast=ar(e);for(const t of e.statements)this.convertStatement(t)}transform(){return{ast:this.ast}}pushStatement(e){this.ast.body.push(e)}createDeclaration(e,t){const n={start:e.getFullStart(),end:e.getEnd()};if(!t){const b=new nt({range:n});return this.pushStatement(b.iife),b}const o=t.getText(),h=new nt({id:t,range:n}),p=this.declarations.get(o);if(p){p.pushIdentifierReference(t),p.declaration.end=n.end;let b=this.ast.body.findIndex(a=>a==p.declaration);for(let a=b+1;a<this.ast.body.length;a++){const i=this.ast.body[a];i.start=i.end=n.end}}else this.pushStatement(h.declaration),this.declarations.set(o,h);return p||h}convertStatement(e){if(c.isEnumDeclaration(e))return this.convertEnumDeclaration(e);if(c.isFunctionDeclaration(e))return this.convertFunctionDeclaration(e);if(c.isInterfaceDeclaration(e)||c.isClassDeclaration(e))return this.convertClassOrInterfaceDeclaration(e);if(c.isTypeAliasDeclaration(e))return this.convertTypeAliasDeclaration(e);if(c.isVariableStatement(e))return this.convertVariableStatement(e);if(c.isExportDeclaration(e)||c.isExportAssignment(e))return this.convertExportDeclaration(e);if(c.isModuleDeclaration(e))return this.convertNamespaceDeclaration(e);if(e.kind==c.SyntaxKind.NamespaceExportDeclaration)return this.removeStatement(e);if(c.isImportDeclaration(e)||c.isImportEqualsDeclaration(e))return this.convertImportDeclaration(e);throw new C(e)}removeStatement(e){this.pushStatement(N({type:"ExpressionStatement",expression:{type:"Literal",value:"pls remove me"}},e))}convertNamespaceDeclaration(e){if(e.flags&c.NodeFlags.GlobalAugmentation||!c.isIdentifier(e.name)){this.createDeclaration(e).convertNamespace(e,!0);return}const n=this.createDeclaration(e,e.name);n.pushIdentifierReference(e.name),n.convertNamespace(e)}convertEnumDeclaration(e){this.createDeclaration(e,e.name).pushIdentifierReference(e.name)}convertFunctionDeclaration(e){if(!e.name)throw new C(e,"FunctionDeclaration should have a name");const t=this.createDeclaration(e,e.name);t.pushIdentifierReference(e.name),t.convertParametersAndType(e)}convertClassOrInterfaceDeclaration(e){if(!e.name)throw new C(e,"ClassDeclaration / InterfaceDeclaration should have a name");const t=this.createDeclaration(e,e.name),n=t.convertTypeParameters(e.typeParameters);t.convertHeritageClauses(e),t.convertMembers(e.members),t.popScope(n)}convertTypeAliasDeclaration(e){const t=this.createDeclaration(e,e.name),n=t.convertTypeParameters(e.typeParameters);t.convertTypeNode(e.type),t.popScope(n)}convertVariableStatement(e){const{declarations:t}=e.declarationList;if(t.length!==1)throw new C(e,"VariableStatement with more than one declaration not yet supported");for(const n of t){if(!c.isIdentifier(n.name))throw new C(e,"VariableDeclaration must have a name");this.createDeclaration(e,n.name).convertTypeNode(n.type)}}convertExportDeclaration(e){if(c.isExportAssignment(e)){this.pushStatement(N({type:"ExportDefaultDeclaration",declaration:I(e.expression)},e));return}const t=e.moduleSpecifier?I(e.moduleSpecifier):void 0;if(!e.exportClause)this.pushStatement(N({type:"ExportAllDeclaration",source:t,exported:null},e));else if(c.isNamespaceExport(e.exportClause))this.pushStatement(N({type:"ExportAllDeclaration",source:t,exported:O(e.exportClause.name)},e));else{const n=[];for(const o of e.exportClause.elements)n.push(this.convertExportSpecifier(o));this.pushStatement(N({type:"ExportNamedDeclaration",declaration:null,specifiers:n,source:t},e))}}convertImportDeclaration(e){if(c.isImportEqualsDeclaration(e)){if(!c.isExternalModuleReference(e.moduleReference))throw new C(e,"ImportEquals should have a literal source.");this.pushStatement(N({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:O(e.name)}],source:I(e.moduleReference.expression)},e));return}const t=I(e.moduleSpecifier),n=e.importClause&&e.importClause.namedBindings?this.convertNamedImportBindings(e.importClause.namedBindings):[];e.importClause&&e.importClause.name&&n.push({type:"ImportDefaultSpecifier",local:O(e.importClause.name)}),this.pushStatement(N({type:"ImportDeclaration",specifiers:n,source:t},e))}convertNamedImportBindings(e){return c.isNamedImports(e)?e.elements.map(t=>{const n=O(t.name),o=t.propertyName?O(t.propertyName):n;return{type:"ImportSpecifier",local:n,imported:o}}):[{type:"ImportNamespaceSpecifier",local:O(e.name)}]}convertExportSpecifier(e){const t=O(e.name);return{type:"ExportSpecifier",exported:t,local:e.propertyName?O(e.propertyName):t}}}class mr{static{g(this,"ExportsFixer")}constructor(e){this.source=e,this.DEBUG=!!process.env.DTS_EXPORTS_FIXER_DEBUG}fix(){const e=this.findExports();return e.sort((t,n)=>t.location.start-n.location.start),this.getCodeParts(e).join("")}findExports(){const{rawExports:e,values:t,types:n}=this.getExportsAndLocals();return e.map(o=>{const h=o.elements.map(p=>{const b=p.name.text,a=p.propertyName?.text??p.name.text,i=n.some(s=>s.getText()===a)&&!t.some(s=>s.getText()===a)?"type":"value";return this.DEBUG&&console.log(`export ${a} as ${b} is a ${i}`),{exportedName:b,localName:a,kind:i}});return{location:{start:o.getStart(),end:o.getEnd()},exports:h}})}getExportsAndLocals(e=this.source.statements){const t=[],n=[],o=[],h=g(p=>{const{rawExports:b,values:a,types:i}=this.getExportsAndLocals(p);t.push(...b),n.push(...a),o.push(...i)},"recurseInto");for(const p of e)if(this.DEBUG&&console.log(p.getText(),p.kind),!c.isImportDeclaration(p)){if(c.isInterfaceDeclaration(p)||c.isTypeAliasDeclaration(p)){this.DEBUG&&console.log(`${p.name.getFullText()} is a type`),o.push(p.name);continue}if(c.isEnumDeclaration(p)||c.isFunctionDeclaration(p)||c.isClassDeclaration(p)||c.isVariableStatement(p)){if(c.isVariableStatement(p))for(const b of p.declarationList.declarations)c.isIdentifier(b.name)&&(this.DEBUG&&console.log(`${b.name.getFullText()} is a value (from var statement)`),n.push(b.name));else p.name&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from declaration)`),n.push(p.name));continue}if(c.isModuleBlock(p)){const b=p.statements;h(b);continue}if(c.isModuleDeclaration(p)){p.name&&c.isIdentifier(p.name)&&(this.DEBUG&&console.log(`${p.name.getFullText()} is a value (from module declaration)`),n.push(p.name)),h(p.getChildren());continue}if(c.isExportDeclaration(p)){if(p.moduleSpecifier||p.isTypeOnly)continue;const b=p.exportClause;if(!b||!c.isNamedExports(b))continue;t.push(b);continue}this.DEBUG&&console.log("unhandled statement",p.getFullText(),p.kind)}return{rawExports:t,values:n,types:o}}createNamedExport(e,t=!1){return`${!t&&e.kind==="type"?"type ":""}${e.localName}${e.localName===e.exportedName?"":` as ${e.exportedName}`}`}getCodeParts(e){let t=0;const n=this.source.getFullText(),o=[];for(const h of e){const p=n.slice(t,h.location.start);p.length>0&&o.push(p),o.push(this.getExportStatement(h)),t=h.location.end}return t<n.length&&o.push(n.slice(t)),o}getExportStatement(e){const t=e.exports.every(n=>n.kind==="type")&&e.exports.length>0;return`${t?"type ":""}{ ${e.exports.map(n=>this.createNamedExport(n,t)).join(", ")} }`}}function q(r,e){return c.createSourceFile(r,e,c.ScriptTarget.Latest,!0)}g(q,"parse");const hr=g(()=>{const r=new Map,e=new Map;return{name:"dts-transform",options({onLog:t,...n}){return{...n,onLog(o,h,p){o==="warn"&&h.code=="CIRCULAR_DEPENDENCY"||(t?t(o,h,p):p(o,h))},treeshake:{moduleSideEffects:"no-external",propertyReadSideEffects:!0,unknownGlobalSideEffects:!1}}},outputOptions(t){return{...t,chunkFileNames:t.chunkFileNames||"[name]-[hash].d.ts",entryFileNames:t.entryFileNames||"[name].d.ts",format:"es",exports:"named",compact:!1,freeze:!0,interop:"esModule",generatedCode:Object.assign({symbols:!1},t.generatedCode),strict:!1}},transform(t,n){let o=q(n,t);const h=cr({sourceFile:o});r.set(o.fileName,h.typeReferences),e.set(o.fileName,h.fileReferences),t=h.code.toString(),o=q(n,t);const p=pr({sourceFile:o});return process.env.DTS_DUMP_AST&&(console.log(n),console.log(t),console.log(JSON.stringify(p.ast.body,void 0,2))),{code:t,ast:p.ast,map:h.code.generateMap()}},renderChunk(t,n,o){const h=q(n.fileName,t),p=new nr(h),b=new Set,a=new Set;for(const u of Object.keys(n.modules)){for(const l of r.get(u.split("\\").join("/"))||[])b.add(l);for(const l of e.get(u.split("\\").join("/"))||[])if(l.startsWith(".")){const m=T.join(T.dirname(u),l),f=o.file&&T.dirname(o.file)||n.facadeModuleId&&T.dirname(n.facadeModuleId)||".";let d=T.relative(f,m).split("\\").join("/");d[0]!=="."&&(d="./"+d),a.add(d)}else a.add(l)}let i=at(Array.from(a,u=>`/// <reference path="${u}" />`));return i+=at(Array.from(b,u=>`/// <reference types="${u}" />`)),i+=p.fix(),i||(i+=`
export { }`),{code:new mr(q(n.fileName,i)).fix(),map:{mappings:""}}}}},"transform");function at(r){return r.length?r.join(`
`)+`
`:""}g(at,"writeBlock");const fe=/\.([cm]ts|[tj]sx?)$/;function pe({programs:r,resolvedOptions:{compilerOptions:e,tsconfig:t}},n,o){if(!r.length&&B.test(n))return{code:o};const h=r.find(p=>!!p.getSourceFile(n));if(h){const p=h.getSourceFile(n);return{code:p?.getFullText(),source:p,program:h}}else if(c.sys.fileExists(n)){const p=Qt(n,e,t);r.push(p);const b=p.getSourceFile(n);return{code:b?.getFullText(),source:b,program:p}}else return null}g(pe,"getModule");const it=g((r={})=>{const e=hr(),t={programs:[],resolvedOptions:Yt(r)};return{name:"dts",outputOptions:e.outputOptions,renderChunk:e.renderChunk,options(n){let{input:o=[]}=n;if(!Array.isArray(o))o=typeof o=="string"?[o]:Object.values(o);else if(o.length>1){n.input={};for(const h of o){let p=h.replace(/((\.d)?\.(c|m)?(t|j)sx?)$/,"");T.isAbsolute(h)?p=T.basename(p):p=T.normalize(p),n.input[p]=h}}return t.programs=Zt(Object.values(o),t.resolvedOptions.compilerOptions,t.resolvedOptions.tsconfig),e.options.call(this,n)},transform(n,o){if(!fe.test(o))return null;const h=g(i=>{if(i.program){const s=T.dirname(o);i.program.getSourceFiles().map(l=>l.fileName).filter(l=>l.startsWith(s)).forEach(this.addWatchFile)}},"watchFiles"),p=g(()=>{const i=pe(t,o,n);return i?(h(i),e.transform.call(this,i.code,o)):null},"handleDtsFile"),b=g(()=>{const i=o.replace(fe,Ye);let s=pe(t,i,n);return s?(h(s),e.transform.call(this,s.code,i)):null},"treatTsAsDts"),a=g(()=>{const i=pe(t,o,n);if(!i||!i.source||!i.program)return null;h(i);const s=o.replace(fe,Ye);let u;const{emitSkipped:l,diagnostics:m}=i.program.emit(i.source,(f,d)=>{u=e.transform.call(this,d,s)},void 0,!0);if(l){const f=m.filter(d=>d.category===c.DiagnosticCategory.Error);f.length&&(console.error(c.formatDiagnostics(f,oe)),this.error("Failed to compile. Check the logs above."))}return u},"generateDtsFromTs");return B.test(o)?p():b()??a()},resolveId(n,o){if(!o)return;o=o.split("\\").join("/");let h=t.resolvedOptions.compilerOptions;if(t.resolvedOptions.tsconfig){const b=n.startsWith(".")?T.resolve(T.dirname(o),n):n;h=ce(b,t.resolvedOptions.compilerOptions,t.resolvedOptions.tsconfig).compilerOptions}const{resolvedModule:p}=c.resolveModuleName(n,o,h,c.sys);if(p)return!t.resolvedOptions.respectExternal&&p.isExternalLibraryImport?{id:n,external:!0}:{id:T.resolve(p.resolvedFileName)}}}},"plugin");exports.default=it,exports.dts=it;
